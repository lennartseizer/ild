---
title: "My Page"
---

Preprocessing can be organized along a reproducible workflow: (1) understand the study design, (2) reliably import the raw data, (3) validate measurement windows, (4) classify missing and problematic observations, (5) compute scales and derived variables, (6) generate the analysis dataset for the target model (e.g., LMM). Each step should be documented in scripts to ensure that the analyses remain transparent and reproducible. 

<figure>
<img src="https://www.researchgate.net/profile/Sheen-Levine/publication/325941519/figure/fig2/AS:824194581422080@1573514709439/The-Datasaurus-Dozen-Matejka-Fitzmaurice-2017-an-extension-of-Anscombes-quartet.ppm">
</figure>

```{r}
install.packages("dplyr")
library(dplyr)
install.packages("ggplot2")
library(ggplot2)
install.packages("remotes")
library(remotes)
remotes::install_github("wviechtb/esmpack@v0.1-17")
library(esmpack)
```

```{r, message=FALSE}
# load example data
data <- read.delim("https://www.kuleuven.be/samenwerking/real/real-book/viechtbauer2022_data_esmda_example")

dplyr::tibble(data)
```

# Design and sampling scheme

Number of subjects and planned observations 
```{r}
length(unique(data$id))
nrow(data)
```

Missing values in design variables?
```{r}
esmpack::check.nomiss(day, id, data=data)
esmpack::check.nomiss(beep, id, data=data)
esmpack::check.nomiss(obs, id, data=data)
```


# Participants response behaviors

Study duration (in days)
```{r, message=FALSE}
check.timeinvar(age, id, data=data, na.rm=FALSE)
check.timeinvar(sex, id, data=data, na.rm=FALSE)
check.timeinvar(status, id, data=data, na.rm=FALSE)
```

```{r}
# compute response delays
data$delay <- data$resptime - data$beeptime

# barplot of the delay values
barplot(table(data$delay), xlab="Delay in Minutes")
```


# Compute and transform variables

# First glimpse

```{r, message=FALSE}
id_select <- c("c100", "c101", "c102", "c103", "c104")

data %>% filter(id %in% id_select) %>%
     ggplot(aes(x=obs, y=mood_relaxed)) +
     geom_line() +
     geom_point() +
     facet_grid(id~., scales="free") 


```

